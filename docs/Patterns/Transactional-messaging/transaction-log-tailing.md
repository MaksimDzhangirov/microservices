# Шаблон: Отслеживание лога транзакций

[Оригинал](https://microservices.io/patterns/data/transaction-log-tailing.html)

## Дано

Вы воспользовались шаблоном [Таблица исходящих транзакций](transactional-outbox.md).

## Задача

Как опубликовать сообщения/события из таблицы _outbox_ базы данных в брокер
сообщений?

## Дополнительные условия

---

## Решение

Отслеживайте лог транзакций базы данных и публикуйте каждое 
сообщение/событие, вставленное в таблицу _outbox_ в брокер сообщений.

![](../../../images/transaction-log-tailing/TransactionLogMining.png)

Механизм отслеживания журнала транзакций зависит от базы данных:

* Бинлог MySQL
* Postgres WAL
* Потоки таблиц AWS DynamoDB

## Пример

* [Фреймворк Eventuate Tram](https://github.com/eventuate-tram/eventuate-tram-core) реализует 
  отслеживание лога транзакций.

## Преимущества и недостатки

Этот шаблон имеет следующие преимущества:

* 2PC не используется
* Гарантируется точность отслеживания

Этот шаблон имеет следующие недостатки:

* Относительно малоизвестный подход, хотя становится все более распространенным
* Требуется специфических решений для конкретной базы данных
* Сложно избежать дублирования публикации

## Связанные шаблоны

* Шаблон [Таблица исходящих транзакций](transactional-outbox.md) создаёт
  необходимость использования этого шаблона
* [Отправка сообщений путём опрашивания](polling-publisher.md) является
  альтернативным решением

## Где можно получить более подробную информацию о шаблоне

* В моей книге [Microservices patterns](https://microservices.io/book) этот
  шаблон описывается подробнее.
* В [фреймворке Eventuate Tram](https://github.com/eventuate-tram/eventuate-tram-core)
  реализован этот шаблон
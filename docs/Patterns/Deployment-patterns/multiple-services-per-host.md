# Шаблон: Несколько экземпляров сервиса на хосте

[Оригинал](https://microservices.io/patterns/deployment/multiple-services-per-host.html)

## Дано

Вы воспользовались шаблоном [Микросервисная архитектура](../Application-architecture-patterns/pattern-microservice-architecture.md) и 
спроектировали свою систему как набор сервисов. Каждый сервис развертывается 
как набор экземпляров сервиса для обеспечения пропускной способности и 
доступности.

## Задача

Как оформить и развернуть сервисы?

## Дополнительные условия

* Сервисы написаны с использованием различных языков, фреймворков и 
  версий фреймворков
* Каждый сервис состоит из нескольких экземпляров сервиса для обеспечения 
  пропускной способности и доступности
* Сервис должен быть независимо развертываемым и масштабируемым
* Экземпляры сервиса должны быть изолированы друг от друга
* Вам нужно уметь быстро создавать и развертывать сервис
* Вы должны иметь возможность ограничивать ресурсы (ЦП и память), 
  потребляемые сервисом.
* Вам необходимо отслеживать поведение каждого экземпляра сервиса
* Вы хотите, чтобы развертывание было надежным
* Вы должны развернуть приложение как можно более экономично

## Решение

Запустите несколько экземпляров разных сервисов на хосте (физическом или 
виртуальном компьютере).

Существуют различные способы развертывания экземпляра сервиса на общем 
хосте, в том числе:

* Развёртывание каждого экземпляра сервиса как JVM процесса. Например,
  Tomcat или Jetty экземпляры для экземпляра сервиса
* Развёртывание нескольких экземпляров сервиса на одной JVM. Например, в 
  виде веб-приложений или OSGI пакетов.

## Примеры

---

## Преимущества и недостатки

К преимуществам этого шаблона относятся:

* Более эффективное использование ресурсов, чем в случае с [шаблоном
«По сервису на хосте»](single-service-per-host.md)

К недостаткам этого подхода относятся:

* Риск противоречивых требований к ресурсам
* Риск конфликтующих версий зависимостей
* Сложно ограничить ресурсы, потребляемые экземпляром сервиса
* Если в одном процессе развернуто несколько экземпляров сервисов, то сложно 
  отслеживать потребление ресурсов каждым из них. Также невозможно 
  изолировать каждый экземпляр

## Связанные шаблоны

* [Шаблон «По сервису на хосте»](single-service-per-host.md) является 
  альтернативным решением.
* [Шаблон «Бессерверное развертывание»](serverless-deployment.md) является 
  альтернативным решением.
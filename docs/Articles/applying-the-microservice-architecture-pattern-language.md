# Применяем язык шаблонов микросервисной архитектуры

[Оригинал](https://microservices.io/articles/applying.html)

Язык шаблонов микросервисной архитектуры состоит из многочисленных 
групп шаблонов. Польза от использования языка шаблонов превышает сумму 
польз от использования его отдельных шаблонов, потому что он определяет 
следующие отношения между шаблонами:

_Предшественник_ — шаблон-предшественник — это шаблон, который обосновывает 
потребность в данном шаблоне. Например, шаблон микросервисной архитектуры 
является предшественником остальных шаблонов языка шаблонов, за исключением 
шаблона монолитной архитектуры.

_Преемник_ — шаблон, который решает проблемы, порожденные данным шаблоном. 
Например, при использовании микросервисной архитектуры необходимо
применить целый ряд шаблонов-преемников, включая обнаружение сервисов
и шаблон Circuit Breaker.

_Альтернатива_ – шаблон, предоставляющий альтернативное решение по отношению 
к данному шаблону. Например, шаблон монолитной архитектуры и шаблон 
микросервисной архитектуры являются альтернативными способами разработки 
приложения. Нужно выбрать один из них. Эти отношения определяют полезный
набор правил при использовании языка шаблонов. Применение шаблона создает 
проблемы, которые затем необходимо устранить, используя шаблоны-преемники.
Выбирайте шаблоны последовательно рекурсивно, пока не дойдёте до шаблонов
без приемников. Если два или более шаблона являются альтернативными, обычно 
следует выбрать только один. Во многом это похоже на обход графа.

Давайте посмотрим, как вы можете применить язык шаблонов микросервисной 
архитектуры для разработки своего приложения. В этом посте мы рассмотрим 
3 важных выбора, которые вы должны сделать. В последующих постах мы 
рассмотрим другие важные, хотя и не столь критичные шаблоны.

## Выбор 1: Монолитная архитектура или микросервисная архитектура?

Первый выбор, который вы должны сделать, — это использовать [шаблон 
монолитной архитектуры](../Patterns/Application-architecture-patterns/pattern-monolithic-architecture.md) или 
[шаблон микросервисной архитектуры](../Patterns/Application-architecture-patterns/pattern-microservice-architecture.md). 
Если вы выберете шаблон микросервисной архитектуры, вы должны будете 
воспользоваться множеством других шаблонов, чтобы решить проблемы, связанные 
с вашим выбором.

![](../../images/applying-the-microservice-architecture-pattern-language/PatternsRelatedToMicroservices.jpg)

Как видите, существует множество других шаблонов, которые вы должны 
использовать. Давайте рассмотрим несколько выборов, которые вы должны 
сделать.

## Выбор 2: Как декомпозировать приложение на сервисы?

Если вы решили использовать микросервисную архитектуру, то должны определить 
свои сервисы. Существует два основных варианта

* [Декомпозиция по бизнес-возможностям](../Patterns/Decomposition/decompose-by-business-capability.md) — определяет 
  сервисы, соответствующие бизнес-возможностям
* [Декомпозиция по подобластям, основанная на предметно-ориентированном
  проектировании](../Patterns/Decomposition/decompose-by-subdomain.md) — определяет 
  сервисы, соответствующие подобластям при предметно-ориентированном
  проектировании 

Эти шаблоны приводят к эквивалентным результатам: набору сервисов, 
организованных вокруг бизнес-концепций, а не технических концепций.

## Выбор 3: Как поддерживать согласованность данных и выполнять запросы?

Ключевой особенностью микросервиса является [шаблон «По базе данных на сервис»](../Data-management/database-per-service.md).
Его альтернатива — [шаблон «Общая базы данных»](../Data-management/shared-database.md) — по 
сути является анти-шаблоном, и его лучше избегать. Шаблон «По базе данных на 
сервис» кардинально меняет способ поддержания согласованности данных и 
выполнения запросов. Вам нужно будет использовать [шаблон «Сага»](../Data-management/saga.md). Вам 
часто потребуется реализовывать запросы с использованием шаблона [Разделение
ответственности команд и запросов (CQRS)](../Data-management/cqrs.md).

Продолжение следует...